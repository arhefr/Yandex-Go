# **Содержание**
>  - [**Описание:**](#описание)
>      - [Возможности](#возможности)
>  - [**Инструкция:**](#инструкция)
>      - [Как запустить сервер?](#как-запустить-сервер)
>      - [Как отправлять POST запросы?](#как-отправлять-post-запросы)
>      - [Как запустить тесты?](#как-запустить-тесты)
>  - [**Примеры использования.**](#примеры-использования)

# **Описание**
>[!NOTE]
>Это **сервер-калькулятор,** написанный на языке **GO**, принимающий POST-запросы с JSON в body.
>
>## **Возможности**
>Калькулятор поддеживает **любые числа**, а также следующие операторы:
>
> | Оператор | Символ | Пример | Решение | Особенности |
> | -------- | ------ | ------ | ------- | ----------- |
> | Сложение | + | 2 + 2 | 4 | ... |
> | Вычитание | - | 2 -- 2 | 4 | Минус на минус даёт плюс |
> | Умножение | * | -2 * (-2) | 4 | ... |
> | Деление | / | 2 / 2 | 1 | На ноль делить нельзя |
> | Возведение в степень | ** | 2 ** 2 | 4 | Поддерживает отрицательные степени |
> | Извлечение корня | ** | 4**(1/2) | 2 | Чтобы извлечь корень, возведите число в степень (1/n), где n степень корня |
> | Cкобки | ( ) | 2(2) | 4 | Если перед скобкой отсутсвует оператор, то число перед ней умножится на неё |

# **Инструкция**
>[!WARNING]
> + Убедитесь, что вы успешно склонировали репозиторий и у вас установлен Golang версии 1.23.0 или выше
> + Все комманды писать в терминале из папки проекта

>[!IMPORTANT]
>## **Как запустить сервер?**
> ```shell
> go run calculator/cmd/main.go
> ```

> [!IMPORTANT]
>## **Как отправлять POST запросы?**
>+ Сервер принимает запросы по адресу:
>   ```shell
>   http://localhost:8080/api/v1/calculate
>   ```
>+ В запросе, JSON должен быть следующего вида:
>   ```shell
>   {\"expression\":\"2+2\"}
>   ```
>   
>### Пример запроса:
>```shell
>curl -X POST -H "Content-type:application/json" --data "{\"expression\":\"2**2\"}" http://localhost:8080/api/v1/calculate
>```

> [!IMPORTANT]
>## **Как запустить тесты?**
> **Для калькулятора:**
> + ```shell
>   cd calculator/pkg/calc
>   ```
> + ```shell
>   go test -v -cover
>   ```
> **Для сервера:**
> + ```shell
>   cd calculator/internal/application/handler
>   ```
> + ```shell
>   go test -v -cover
>   ```

# **Примеры использования**
>[!NOTE]
>**Взависимости от запроса, сервер может вернуть различные сообщения и статусы:**
>
> | Статус | Запрос | Ответ сервера | Причина |
> | ---- | --------- | ------ | ------ |
> | **200** | `curl -X POST -H "Content-type:application/json" --data "{\"expression\":\"2+2\"}" http://localhost:8080/api/v1/calculate` | `{"result": 6}` | Корректный запрос |
> | **405** | `curl localhost:8080/api/v1/calculate?expression="2+2"` | `{"error": "Method is not allowed"}` | Неккоректный тип запроса
> | **422** | `curl -X POST -H "Content-type:application/json" --data "{\"expression\":\"2+\"}" http://localhost:8080/api/v1/calculate` | `{"error": "Expression is not valid"}` | Неккоректное математическое выражение
> | **500** | `curl -X POST -H "Content-type:application/json" --data "{\"expression\":\"2+2\"" http://localhost:8080/api/v1/calculate` | `{"error": "Internal server error"}` | Неккоректный JSON или неизвестная ошибка
